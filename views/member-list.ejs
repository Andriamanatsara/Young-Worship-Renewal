<div class="container mt-4 mb-3">
    <div class="row">
        <div class="col-md-8">
            <div class="table-container">
                <!-- Barre de recherche -->
                <div class="search-container">
                    <input type="text" id="searchInput" class="form-control" placeholder="Rechercher un membre..." oninput="searchTable()">
                    <button class="btn btn-secondary" id="clearSearchBtn" onclick="clearSearch()" style="display:none;">×</button>
                </div>
                
                <% if (members != '') { %>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Membres</th>
                            <th onclick="sortTable(0)"><span class="sort-indicator">A - Z ▼</span></th>
                        </tr>
                    </thead>
                    <tbody id="memberTable" class="scrollable-tbody">
                        <% members.forEach((member) => { %>
                        <tr data-id="<%= member.id %>" 
                            data-name="<%= member.surname %>" 
                            data-engagement="<%= member.engagement %>" 
                            data-role="<%= member.roleInGroup %>"
                            data-address="<%= member.adress %>" 
                            data-phone="<%= member.phoneNumber %>" 
                            data-facebook="https://facebook.com/<%= member.facebook %>" 
                            data-email="<%= member.email %>" 
                            data-image="/Pictures/<%= member.screenMember %>">
                            <td class="member-info">
                                <img src="/Pictures/<%= member.screenMember %>" alt="" class="rounded-circle">
                                <div>
                                    <span class="member-name"><%= member.name %> <%= member.surname %></span><br>
                                    <small><%= member.engagement %></small>
                                </div>
                            </td>
                        </tr>
                        <% }) %>
                    </tbody>
                    
                </table>
                <% } else {%>
                    <div class="text-center p-4">
                        <span class="text-secondary fw-bold">Aucun membre inscrit dans la base de donnée.</span>
                    </div>
                <% } %>
                <div id="noResultsRow" class="text-center">
                    <span class="text-secondary p-2 fw-bold">Aucun membre trouvé</span>
                </div>
                
            </div>
        </div>

        <!-- SECTION PROFIL (DESKTOP) -->
        <div class="col-md-4 desktop-profile">
            <div class="profile-container" id="profileSection">
                <img id="profileImage" src="/assets/img/avatar.png" alt="Photo de profil">
                <div class="profile-info">
                    <h5 id="profileName" class="fw-bold">Nom du membre</h5>
                    <div class="profile-role" id="profileRole">Role du membre</div>
                    <div class="profile-address" id="profileAddress">adresse du membre</div>
                    <div class="profile-phone" id="profilePhone">Téléphone</div>
                    <div class="profile-icons">
                        <a id="profileFacebook" href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                        <a id="profileEmail" href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                    <% if(user){ %>
                        <div class="button mt-4">
                            <!-- Bouton Modifier -->
                            <a class="btn btn-warning btn-sm me-2 btn-edit"  href="">
                                <i class="fa fa-edit"></i> Modifier
                            </a>
                        
                            <!-- Bouton Supprimer -->
                            <button class="btn btn-danger btn-sm delete-btn btn-delete">
                                <i class="fa fa-trash"></i> Supprimer
                            </button>
                        </div>
                    <% } %>
                    
                    
                </div>
            </div>
        </div>

        
        
    </div>
</div>

<!-- POPUP MOBILE -->
<div class="overlay" id="overlay"></div>
<div class="profile-popup" id="profilePopup">
    <button class="close-btn" id="closePopup"><i class="fa fa-close"></i></button>
    <div class="profile-container">
        <img id="popupImage" src="" alt="Photo de profil">
        <div class="profile-info">
            <h5 id="popupName"></h5>
            <div class="profile-role" id="popupRole"></div>
            <div class="profile-address" id="popupAddress"></div>
            <div class="profile-phone" id="popupPhone"></div>
            <div class="profile-icons">
                <a id="popupFacebook" href="#" target="_blank"><i class="fab fa-facebook"></i></a>
                <a id="popupEmail" href="#"><i class="fas fa-envelope"></i></a>
            </div>
            <% if(user){ %>
                <div class="button mt-4">
                    <!-- Bouton Modifier -->
                    <a class="btn btn-warning btn-sm me-2 btn-edit-popUp"  href="">
                        <i class="fa fa-edit"></i> Modifier
                    </a>
                
                    <!-- Bouton Supprimer -->
                    <button class="btn btn-danger btn-sm delete-btn btn-delete-popUp">
                        <i class="fa fa-trash"></i> Supprimer
                    </button>
                </div>
            <% } %>
        </div>
    </div>
</div>